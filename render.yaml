
services:
  - type: web
    name: classbank
    env: node
    plan: free
    branch: main

    # Build & run
    buildCommand: |
      npm install
    startCommand: |
      npm start

    # Seed the database once when the service instance is first created
    initCommand: |
      npm run init-db

    # Persist the SQLite database between restarts/deploys
    disks:
      - name: dbdisk
        mountPath: /opt/render/project/data
        sizeGB: 1

    # Session secret for logins
    envVars:
      - key: SESSION_SECRET
        generateValue: true

    # Simple health check (optional)
    healthCheckPath: /
